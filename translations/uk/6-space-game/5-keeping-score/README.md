<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "d642759cf1542f554871f74956a59af9",
  "translation_date": "2025-10-24T15:59:19+00:00",
  "source_file": "6-space-game/5-keeping-score/README.md",
  "language_code": "uk"
}
-->
# Створення космічної гри, частина 5: Очки та життя

## Тест перед лекцією

[Тест перед лекцією](https://ff-quizzes.netlify.app/web/quiz/37)

Готові зробити вашу космічну гру справжньою? Додамо систему очок і управління життями — основні механіки, які перетворили ранні аркадні ігри, такі як Space Invaders, з простих демонстрацій у захоплююче розвагу. Саме тут ваша гра стає дійсно цікавою.

## Відображення тексту на екрані — голос вашої гри

Щоб показати ваші очки, нам потрібно навчитися відображати текст на полотні. Метод `fillText()` — ваш основний інструмент для цього. Це той самий метод, який використовувався в класичних аркадних іграх для показу очок і статусу.

Ви маєте повний контроль над виглядом тексту:

```javascript
ctx.font = "30px Arial";
ctx.fillStyle = "red";
ctx.textAlign = "right";
ctx.fillText("show this on the screen", 0, 0);
```

✅ Дізнайтеся більше про [додавання тексту на полотно](https://developer.mozilla.org/docs/Web/API/Canvas_API/Tutorial/Drawing_text) — можливо, ви здивуєтеся, наскільки творчо можна працювати зі шрифтами та стилями!

## Життя — це більше, ніж просто число

У дизайні ігор "життя" представляє запас помилок гравця. Ця концепція бере початок з пінболу, де ви отримували кілька куль для гри. У ранніх відеоіграх, таких як Asteroids, життя давали гравцям можливість ризикувати і вчитися на помилках.

Візуальне представлення має велике значення — показ кораблів замість просто "Життя: 3" створює миттєве візуальне сприйняття, подібно до того, як ранні аркадні автомати використовували іконографію для спілкування через мовні бар'єри.

## Створення системи винагород вашої гри

Тепер ми реалізуємо основні системи зворотного зв’язку, які утримують гравців:

- **Система очок**: Кожен знищений ворожий корабель приносить 100 очок (круглі числа легше обчислювати подумки). Очки відображаються в нижньому лівому куті.
- **Лічильник життів**: Ваш герой починає з трьох життів — стандарт, встановлений ранніми аркадними іграми для балансу між викликом і можливістю грати. Кожне зіткнення з ворогом коштує одного життя. Ми відобразимо залишок життів у нижньому правому куті за допомогою іконок кораблів ![зображення життя](../../../../translated_images/life.6fb9f50d53ee0413cd91aa411f7c296e10a1a6de5c4a4197c718b49bf7d63ebf.uk.png).

## Починаємо будувати!

Спочатку налаштуйте робоче середовище. Перейдіть до файлів у папці `your-work`. Ви повинні побачити ці файли:

```bash
-| assets
  -| enemyShip.png
  -| player.png
  -| laserRed.png
-| index.html
-| app.js
-| package.json
```

Щоб протестувати вашу гру, запустіть сервер розробки з папки `your_work`:

```bash
cd your-work
npm start
```

Це запустить локальний сервер за адресою `http://localhost:5000`. Відкрийте цю адресу у вашому браузері, щоб побачити вашу гру. Перевірте управління за допомогою стрілок і спробуйте стріляти у ворогів, щоб переконатися, що все працює.

### Час кодувати!

1. **Скопіюйте необхідні візуальні ресурси**. Скопіюйте файл `life.png` з папки `solution/assets/` у вашу папку `your-work`. Потім додайте lifeImg до функції window.onload:

    ```javascript
    lifeImg = await loadTexture("assets/life.png");
    ```

1. Не забудьте додати `lifeImg` до списку ваших ресурсів:

    ```javascript
    let heroImg,
    ...
    lifeImg,
    ...
    eventEmitter = new EventEmitter();
    ```
  
2. **Налаштуйте змінні гри**. Додайте код для відстеження загальної кількості очок (починаючи з 0) і залишку життів (починаючи з 3). Ми відобразимо ці дані на екрані, щоб гравці завжди знали, де вони знаходяться.

3. **Реалізуйте виявлення зіткнень**. Розширте функцію `updateGameObjects()`, щоб виявляти, коли вороги стикаються з вашим героєм:

    ```javascript
    enemies.forEach(enemy => {
        const heroRect = hero.rectFromGameObject();
        if (intersectRect(heroRect, enemy.rectFromGameObject())) {
          eventEmitter.emit(Messages.COLLISION_ENEMY_HERO, { enemy });
        }
      })
    ```

4. **Додайте відстеження життів і очок до вашого героя**. 
   1. **Ініціалізуйте лічильники**. Під `this.cooldown = 0` у класі `Hero` налаштуйте життя та очки:

        ```javascript
        this.life = 3;
        this.points = 0;
        ```

   1. **Покажіть ці значення гравцю**. Створіть функції для відображення цих значень на екрані:

        ```javascript
        function drawLife() {
          // TODO, 35, 27
          const START_POS = canvas.width - 180;
          for(let i=0; i < hero.life; i++ ) {
            ctx.drawImage(
              lifeImg, 
              START_POS + (45 * (i+1) ), 
              canvas.height - 37);
          }
        }
        
        function drawPoints() {
          ctx.font = "30px Arial";
          ctx.fillStyle = "red";
          ctx.textAlign = "left";
          drawText("Points: " + hero.points, 10, canvas.height-20);
        }
        
        function drawText(message, x, y) {
          ctx.fillText(message, x, y);
        }

        ```

   1. **Підключіть все до циклу гри**. Додайте ці функції до функції window.onload одразу після `updateGameObjects()`:

        ```javascript
        drawPoints();
        drawLife();
        ```

1. **Реалізуйте наслідки та винагороди гри**. Тепер ми додамо системи зворотного зв’язку, які роблять дії гравця значущими:

   1. **Зіткнення коштують життів**. Кожного разу, коли ваш герой стикається з ворогом, ви повинні втратити життя.
   
      Додайте цей метод до класу `Hero`:

        ```javascript
        decrementLife() {
          this.life--;
          if (this.life === 0) {
            this.dead = true;
          }
        }
        ```

   2. **Стрілянина у ворогів приносить очки**. Кожне успішне попадання приносить 100 очок, забезпечуючи миттєвий позитивний зворотний зв’язок за точну стрільбу.

      Розширте клас Hero цим методом збільшення:

        ```javascript
          incrementPoints() {
            this.points += 100;
          }
        ```

        Тепер підключіть ці функції до подій зіткнення:

        ```javascript
        eventEmitter.on(Messages.COLLISION_ENEMY_LASER, (_, { first, second }) => {
           first.dead = true;
           second.dead = true;
           hero.incrementPoints();
        })

        eventEmitter.on(Messages.COLLISION_ENEMY_HERO, (_, { enemy }) => {
           enemy.dead = true;
           hero.decrementLife();
        });
        ```

✅ Цікаво, які ще ігри створені за допомогою JavaScript і Canvas? Досліджуйте — можливо, ви здивуєтеся, що можливо створити!

Після реалізації цих функцій протестуйте вашу гру, щоб побачити повну систему зворотного зв’язку в дії. Ви повинні побачити іконки життів у нижньому правому куті, ваші очки в нижньому лівому куті, і спостерігати, як зіткнення зменшують життя, а успішні постріли збільшують очки.

Тепер ваша гра має основні механіки, які зробили ранні аркадні ігри такими захоплюючими — чіткі цілі, миттєвий зворотний зв’язок і значущі наслідки дій гравця.

---

## Виклик GitHub Copilot Agent 🚀

Використовуйте режим Agent, щоб виконати наступний виклик:

**Опис:** Покращіть систему очок космічної гри, реалізувавши функцію високих очок із постійним збереженням і механікою бонусних очок.

**Завдання:** Створіть систему високих очок, яка зберігає найкращий результат гравця у localStorage. Додайте бонусні очки за послідовні знищення ворогів (система комбо) і реалізуйте різні значення очок для різних типів ворогів. Додайте візуальний індикатор, коли гравець досягає нового високого результату, і відображайте поточний високий результат на екрані гри.

## 🚀 Виклик

Тепер у вас є функціональна гра з очками та життями. Подумайте, які додаткові функції можуть покращити досвід гравця.

## Тест після лекції

[Тест після лекції](https://ff-quizzes.netlify.app/web/quiz/38)

## Огляд і самостійне навчання

Хочете дізнатися більше? Досліджуйте різні підходи до систем очок і життів у іграх. Існують захоплюючі ігрові рушії, такі як [PlayFab](https://playfab.com), які обробляють очки, таблиці лідерів і прогрес гравця. Як інтеграція чогось подібного може вивести вашу гру на новий рівень?

## Завдання

[Створіть гру з системою очок](assignment.md)

---

**Відмова від відповідальності**:  
Цей документ був перекладений за допомогою сервісу автоматичного перекладу [Co-op Translator](https://github.com/Azure/co-op-translator). Хоча ми прагнемо до точності, будь ласка, майте на увазі, що автоматичні переклади можуть містити помилки або неточності. Оригінальний документ на його рідній мові слід вважати авторитетним джерелом. Для критичної інформації рекомендується професійний людський переклад. Ми не несемо відповідальності за будь-які непорозуміння або неправильні тлумачення, що виникають внаслідок використання цього перекладу.